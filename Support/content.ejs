<% if (errorCount || warningCount) { %>
    <div class="panel panel-default">
<% } else { %>
    <div class="panel panel-success">
<% } %>
    <div class="panel-heading">
        <h4>
        Validation report for <a href="<%= fileUrl %>"><tt><b><%= targetFilename %></b></tt></a>
        <div class="small"><%= timestamp %></div>
        </h4>
    </div>
    <div class="panel-body">
        <% if (jshintrcValid) { %>
            <p class="small">Used settings from
                <a href="txmt://open?url=file://<%= jshintrc %>"><tt><%= jshintrc %></tt></a>
            </p>
        <% } else if (jshintrc && !jshintrcValid) { %>
            <p class="small text-danger">Used generic default settings because
                <a href="txmt://open?url=file://<%= jshintrc %>"><tt><%= jshintrc %></tt></a>
                was not valid JSON.
            </p>
        <% } else { %>
            <p class="small">No .jshintrc found. Used default settings.</p>
            <p class="small">See
                <a href="http://www.jshint.com/docs/">http://www.jshint.com/docs/</a>
                for .jshintrc customization instructions.
            </p>
        <% } %>
        <% if (errorCount) { %>
            <% if (errorCount === 1) { %>
                <span class="label label-danger">1 error</span>
            <% } else { %>
                <span class="label label-danger"><%= errorCount %> errors</span>
            <% } %>
        <% } %>

        <% if (warningCount) { %>
            <% if (warningCount === 1) { %>
                <span class="label label-warning">1 warning</span>
            <% } else { %>
                <span class="label label-warning"><%= warningCount %> warnings</span>
            <% } %>
        <% } %>

        <% if (!errorCount && !warningCount) { %>
            <span class="label label-success">No errors or warnings</span>
        <% } %>
    </div>

    <ul class="list-group">
        <% if (!errorCount && !warningCount) { %>
            <li class="list-group-item">
                <span class="symbol">&#9989;</span>
                Looks good!
            </li>
        <% } %>

        <%
            for (var index = 0, len = issues.length; index !== len; ++index) {
                var issue = issues[index];
        %>
            <li class="list-group-item">
                <% if (issue.code[0] === 'E') { %>
                    <span class="symbol">&#10060;</span>
                <% } else if (issue.code[0] === 'W') { %>
                    <span class="symbol">&#9888;</span>
                <% } else if (issue.code[0] === 'I') { %>
                    <span class="symbol">&#8505;</span>
                <% } %>
                <a href="<%= issue.url %>">at line <%= issue.line %> position <%= issue.character %></a>
                <div><tt>
                    <%= issue.reason %> (<span class="issue-code"><%= issue.code %></span>)
                </tt></div>
            </li>
        <% } %>
    </ul>
</div>

<div class="small text-center">
    <b>
    <a href="https://github.com/natesilva/jshint-external.tmbundle"
            class="open-external">
        jshint-external TextMate Bundle
    </a>
    </b>
</div>
